<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Feeling - The Society of Dead Poets</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Eagle+Lake&family=PT+Serif:ital,wght@0,400;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/styledarkacademia.css">
</head>

<body>

    <div class="dark-container">
        
        <img src="img/flower-top-left.png" class="flower-decor top-left" alt="">
        <img src="img/flower-top-right.png" class="flower-decor top-right" alt="">
        <img src="img/flower-bottom-left.png" class="flower-decor bottom-left" alt="">
        <img src="img/flower-bottom-right.png" class="flower-decor bottom-right" alt="">

        <nav class="top-nav">
            <div class="nav-left">
                <a href="home.html" class="nav-icon"><i class="fa-solid fa-house"></i></a>
                
                <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#searchModal">search</a>
                
                <a href="#" class="nav-link">your poetry</a>
            </div>
            <div class="nav-right">
                <a href="index.html" class="nav-link">homepage</a>
            </div>
        </nav>

        <div class="center-content">
            <h1 class="emotion-title">HOW ARE YOU FEELING TODAY?</h1>
            
            <form action="obra.html" class="emotion-form">
                <input type="text" class="emotion-input" placeholder="Type here...">
            </form>

            <div class="suggestions-grid">
                <a href="obra1.html" class="poet-card">
                    <img src="img/roberteggers.jpg" alt="Poet Suggestion">
                </a>
                <a href="obra2.html" class="poet-card">
                    <img src="img/dylanthomas.png" alt="Poet Suggestion">
                </a>
                <a href="obra3.html" class="poet-card">
                    <img src="img/waltwhitman.png" alt="Poet Suggestion">
                </a>
            </div>
            <p class="suggestions-label">suggestions</p>
        </div>
    </div>

    <div class="modal fade" id="searchModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content modal-dark-style">
                <div class="modal-header border-0">
                    <h5 class="modal-title font-serif">Search Poetry</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="searchInput" class="form-control search-bar-modal" placeholder="Search author or work...">
                    
                    <div id="searchResults" class="mt-3 results-list">
                        </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // SIMULAÇÃO DE BANCO DE DADOS E LÓGICA DE BUSCA
        const database = [
            { name: "O Captain! My Captain!", author: "Walt Whitman", url: "obra.html" },
            { name: "The Raven", author: "Edgar Allan Poe", url: "obra.html" },
            { name: "Fernando Pessoa", author: "Fernando Pessoa", url: "obra.html" },
            { name: "Autopsicografia", author: "Fernando Pessoa", url: "obra.html" }
        ];

        const searchInput = document.getElementById('searchInput');
        const resultsDiv = document.getElementById('searchResults');

        // Função para remover acentos e deixar minúsculo
        function normalizeString(str) {
            return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
        }

        searchInput.addEventListener('keyup', (e) => {
            const term = normalizeString(e.target.value);
            resultsDiv.innerHTML = ''; // Limpa resultados anteriores

            if(term.length > 0) {
                const filtered = database.filter(item => {
                    return normalizeString(item.name).includes(term) || normalizeString(item.author).includes(term);
                });

                if(filtered.length === 0) {
                    resultsDiv.innerHTML = '<p class="text-muted">No poetry found.</p>';
                } else {
                    filtered.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'result-item';
                        div.innerHTML = `<a href="${item.url}"><strong>${item.name}</strong> - ${item.author}</a>`;
                        resultsDiv.appendChild(div);
                    });
                }
            }
        });
    </script>
</body>
</html>